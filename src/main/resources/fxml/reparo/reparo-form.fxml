<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<AnchorPane fx:id="rootPane" prefHeight="600" prefWidth="860.0" style="-fx-background-color: #F0F0F0;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.marcoswolf.crm.reparos.ui.controller.reparo.ReparoFormController">

    <children>
        <VBox layoutX="30" layoutY="20" prefWidth="800" spacing="15">

            <HBox alignment="CENTER_LEFT">
                <Label fx:id="lblTitulo" styleClass="titulo-principal" text="Cadastrar Reparo" HBox.hgrow="ALWAYS" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="btnVoltar" minWidth="80" onAction="#voltar" prefHeight="32" styleClass="btn-voltar" text="← Voltar" />
            </HBox>

            <Separator />

            <VBox spacing="10" style="-fx-background-color: #FFFFFF; -fx-padding: 15; -fx-background-radius: 8;">
                <Label style="-fx-font-weight: bold;" text="Dados do Reparo" />

                <GridPane hgap="10" vgap="10">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="15" />
                        <ColumnConstraints percentWidth="35" />
                        <ColumnConstraints percentWidth="15" />
                        <ColumnConstraints percentWidth="35" />
                    </columnConstraints>

                    <Label text="Cliente:" GridPane.rowIndex="1" />
                    <ComboBox fx:id="comboCliente" prefHeight="24.0" prefWidth="263.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <Label text="Equipamento:" GridPane.rowIndex="1" GridPane.columnIndex="2" />
                    <ComboBox fx:id="comboEquipamento" prefHeight="24.0" prefWidth="263.0" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                    <Label text="Status:" GridPane.rowIndex="2" />
                    <ComboBox fx:id="comboStatus" prefHeight="24.0" prefWidth="263.0" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                    <Label text="Número Série:" GridPane.rowIndex="2" GridPane.columnIndex="2" />
                    <TextField fx:id="txtNumeroSerie" editable="false" GridPane.columnIndex="3" GridPane.rowIndex="2" />

                    <Label text="Data Entrada:" GridPane.rowIndex="3" />
                    <DatePicker fx:id="dateEntrada" prefHeight="24.0" prefWidth="264.0" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                    <Label text="Data Saída:" GridPane.columnIndex="2" GridPane.rowIndex="3" />
                    <DatePicker fx:id="dateSaida" prefHeight="24.0" prefWidth="261.0" GridPane.columnIndex="3" GridPane.rowIndex="3" />

                    <Label text="Defeito:" GridPane.rowIndex="4" />
                    <TextArea fx:id="txtDescricaoProblema" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="4" />

                    <Label text="Reparo:" GridPane.rowIndex="5" />
                    <TextArea fx:id="txtServicoExecutado" prefRowCount="2" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="5" />

                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>
            </VBox>

            <VBox spacing="10" style="-fx-background-color: #FFFFFF; -fx-padding: 15; -fx-background-radius: 8;">
                <Label style="-fx-font-weight: bold;" text="Pagamento" />

                <GridPane hgap="10" prefHeight="298.0" prefWidth="543.0" vgap="10">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="15" />
                        <ColumnConstraints percentWidth="35" />
                        <ColumnConstraints percentWidth="15" />
                        <ColumnConstraints percentWidth="35" />
                    </columnConstraints>

                    <Label text="Valor Serviço:" />
                    <TextField fx:id="txtValorServico" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                    <Label text="Desconto:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                    <TextField fx:id="txtDesconto" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                    <Label text="Data Pagamento:" GridPane.rowIndex="1" />
                    <DatePicker fx:id="datePagamento" prefHeight="24.0" prefWidth="260.0" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                    <Label text="Valor Total:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                    <TextField fx:id="txtValorTotal" editable="false" style="-fx-font-weight: bold; -fx-text-fill: green;" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                    <Label text="Peças:" GridPane.rowIndex="5" />
                    <VBox spacing="8" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="5">
                        <!-- Linha de inputs para nova peça -->
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <TextField fx:id="txtPecaDescricao" promptText="Descrição" HBox.hgrow="ALWAYS" />
                            <TextField fx:id="txtPecaQuantidade" prefWidth="80" promptText="Qtd" />
                            <TextField fx:id="txtPecaValorUnitario" prefWidth="120" promptText="Valor unit." />
                            <Button fx:id="btnAdicionarPeca" onAction="#adicionarPeca" text="Adicionar" />
                        </HBox>

                        <TableView fx:id="tabela" prefHeight="196.0" prefWidth="649.0">
                            <columns>
                                <TableColumn fx:id="colDescricao" prefWidth="250" text="Descrição" />
                                <TableColumn fx:id="colQuantidade" prefWidth="100" text="Quantidade" />
                                <TableColumn fx:id="colValorUnitario" prefWidth="120" text="Valor Unit." />
                                <TableColumn fx:id="colValorTotalLinha" prefWidth="120" text="Total" />
                                <TableColumn fx:id="colRemover" prefWidth="50" text="" />
                            </columns>
                        </TableView>
                    </VBox>
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
                </GridPane>
            </VBox>

            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button fx:id="btnExcluir" onAction="#excluir" styleClass="excluir" text="Excluir" visible="false" />
                <Button fx:id="btnSalvar" onAction="#salvar" styleClass="salvar" text="Salvar" />
            </HBox>

        </VBox>
    </children>
</AnchorPane>
